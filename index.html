<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Aubrey's RC offers high-quality remote control cars, custom builds, racing events, and expert advice for RC enthusiasts of all levels.">
    <title>Aubrey's RC - Custom RC Cars & Racing</title>
    
    <!-- Preconnect to external domains for faster loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;600;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    
    <!-- Core styles (load in correct order) -->
    <link rel="stylesheet" href="/assets/css/base.css">
    <link rel="stylesheet" href="/assets/css/header.css">
    <link rel="stylesheet" href="/assets/css/footer.css">
    <link rel="stylesheet" href="/assets/css/index.css">
    <!-- Add cards.css for the carousel -->
    <link rel="stylesheet" href="/assets/css/cards.css">
    
    <!-- Inline critical CSS to prevent FOUC (Flash of Unstyled Content) -->
    <style>
        /* Critical base styles to prevent FOUC */
        body {
            font-family: 'Open Sans', sans-serif;
            margin: 0;
            padding: 0;
            color: #333333;
            padding-top: 70px;
            line-height: 1.6;
        }
        
        .loading-indicator {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .loading-indicator.active {
            display: flex;
        }
        
        .loader {
            width: 40px;
            height: 40px;
            border: 4px solid #dee2e6;
            border-top: 4px solid #FF4D00;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
    
    <!-- Favicon -->
    <link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon">
</head>
<body>
    <!-- Loading indicator for full page loading -->
    <div class="loading-indicator">
        <div class="loader"></div>
    </div>

    <!-- App Root -->
    <div id="app">
        <!-- Header will be inserted by header.js -->
        
        <!-- Main content area -->
        <main id="content">
            <section class="hero">
                <div class="video-background">
                    <iframe
                        src="https://www.youtube.com/embed/fn02DjC0gok?autoplay=1&mute=1&start=25&loop=1&playlist=fn02DjC0gok&controls=0&showinfo=0&rel=0&modestbranding=1"
                        allow="autoplay; encrypted-media"
                        allowfullscreen
                        title="RC Car video background">
                    </iframe>
                </div>
                <div class="hero-overlay"></div>
                <div class="hero-content">
                    <h1>Custom RC Cars & Trucks</h1>
                    <p>Handcrafted in Iowa, built to ignite your passion for RC adventures.</p>
                    <a href="/products.html" class="cta-button">Build your Custom RC</a>
                </div>
            </section>
            
            <section class="featured-products">
                <h2 class="section-title">Featured RC Cars</h2>
                
                <!-- Replace the static product-grid with the dynamic carousel -->
                <div id="product-carousel" class="product-carousel">
                    <!-- ProductCards.js will populate this container -->
                </div>
                
                <!-- View All Products link -->
                <div class="text-center mt-4">
                    <a href="/products.html" class="cta-button">View All Products</a>
                </div>
            </section>
            
            <!-- About section removed -->
            
            <section class="services-section">
                <h2 class="section-title">Our Services</h2>
                <div class="services-grid">
                    <div class="service-card">
                        <h3 class="service-title">Custom Builds</h3>
                        <p>Personalized RC builds tailored to your specifications and performance requirements.</p>
                    </div>
                    <div class="service-card">
                        <h3 class="service-title">Repairs & Upgrades</h3>
                        <p>Professional repair services and performance upgrades for all RC models.</p>
                    </div>
                    <div class="service-card">
                        <h3 class="service-title">Racing Advice</h3>
                        <p>Expert guidance on setup, tuning, and racing techniques from experienced racers.</p>
                    </div>
                </div>
            </section>
        </main>
        
        <!-- Footer will be inserted by footer.js -->
        <footer>
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Contact Us</h3>
                    <p>Email: info@aubreysrc.com</p>
                    <p>Phone: 319-595-8656</p>
                </div>
                <div class="footer-section">
                    <h3>Business Info</h3>
                    <p>Based in Wellsburg, Iowa</p>
                    <p>Open 24/7 for online orders</p>
                </div>
                <div class="footer-section">
                    <h3>About Us</h3>
                    <p>Aubrey "Lee" Barnett has been racing RC cars and trucks since the late 1980s.</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Aubrey's RC. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <!-- Core Scripts -->
    <script src="/assets/js/header.js"></script>
    <script src="/assets/js/footer.js"></script>
    <script src="/assets/js/cart.js"></script>
    <!-- Add cards.js for the carousel -->
    <script src="/assets/js/cards.js"></script>
    
    <!-- Add event listeners for Add to Cart buttons -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Add event listeners for the Add to Cart buttons
            document.querySelectorAll('.add-to-cart-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const productId = e.target.dataset.id;
                    const productName = e.target.dataset.name;
                    const productPrice = parseFloat(e.target.dataset.price);
                    const productImage = e.target.dataset.image;
                    
                    // Add to cart using the Cart or Header method
                    if (window.cart && typeof window.cart.addItem === 'function') {
                        window.cart.addItem({
                            id: productId,
                            name: productName,
                            price: productPrice,
                            image: productImage
                        });
                    } else if (window.header && typeof window.header.addToCart === 'function') {
                        window.header.addToCart({
                            id: productId,
                            name: productName,
                            price: productPrice,
                            image: productImage
                        });
                    } else {
                        // Fallback if neither is available
                        alert(`Added to cart: ${productName} - $${productPrice}`);
                        // Update cart count display as a visual cue
                        const cartCount = document.querySelector('.cart-count');
                        if (cartCount) {
                            const currentCount = parseInt(cartCount.textContent || '0');
                            cartCount.textContent = currentCount + 1;
                        }
                    }
                });
            });
        });
    </script>
</body>
</html>